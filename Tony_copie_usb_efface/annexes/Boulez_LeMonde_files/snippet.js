"use strict";if(!px){var px=function(){function a(){return this.videos=[],this}var b={arrayEquals:function(a,b){if(!a)return!1;if(a.length!==b.length)return!1;for(var c=0,d=b.length;d>c;c++)if(a[c]instanceof Array&&b[c]instanceof Array){if(!a[c].equals(b[c]))return!1}else if(a[c]!==b[c])return!1;return!0},isMobile:function(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|w3c(\-| )|webc|whit|wi(g |nc|nw)|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0),/iPad/i.test(b)&&(a=!1)}(navigator.userAgent||navigator.vendor||window.opera),a},getParamsFromUrl:function(a){var c=a.split("?"),d={};return 2===c.length&&(d=b.deserialize(decodeURIComponent(c[1]))),d},serialize:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},deserialize:function(a){for(var b=a.split("&"),c={},d=0;d<b.length;d++){var e=b[d].split("=");c[e[0]]=e[1]}return c},createHashFromString:function(a){var b=0;if(0==a.length)return b;for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);b=(b<<5)-b+d,b&=b}return Math.abs(b).toString(16)}},c={youtube:{regex:/^(?:https?:\/\/)?(?:www\.)?(?:youtu\.be\/|youtube\.com\/(?:embed\/|v\/|watch\?v=|watch\?.+&v=))((\w|-){11})(?:\S+)?$/,prefix:"yt",containerType:"iframe"},dailymotion:{regex:/^(?:https?:\/\/)?(?:www.)?(?:dai.ly|dailymotion.com)\/(?:embed)\/(?:video\/|hub\/)?([a-zA-Z0-9]+)(?:\/)?([a-zA-Z0-9]+)?(?:_[a-zA-Z0-9-_]*)?|(?:https?:\/\/)?/,prefix:"dm",containerType:"iframe"},vimeo:{regex:/^.*vimeo\.com\/(?:(?:channels\/[A-z]+\/)|(?:groups\/[A-z]+\/videos\/)|(?:video\/))?([0-9]+)?/,prefix:"vm"},ooyala:{regex:/^.*(?:player\.ooyala\.com\/iframe\.html|embeds\.vice\.com\/)\?.*(?:ec|embedCode)=([a-zA-Z0-9]+).*$/,prefix:"oo",findVideos:function(){var c=this,d=function(){var a=[],c=(document.getElementsByTagName("script"),document.querySelectorAll('object[data*="ooyala"] param[name="flashvars"]'));if(!c)return[];for(var d=0;d<c.length;d++)if("string"==typeof c[d].value){var e=b.deserialize(c[d].value);if(!e.embedCode&&!e.ec&&window.OO){var f=b.deserialize(window.OO.Player.isolate(0));e.embedCode=f.ec||f.embedCode}a.push({videoContainerType:"OBJECT",provider_id:e.embedCode||e.ec,source_id:"oo."+(e.embedCode||e.ec),provider:"ooyala",id:c[d].parentNode.id,el:c[d].parentNode,metadata:{embedCode:e.embedCode||e.ec,playerId:e.playerId||e.pbid||e.playerBrandingId||e.me}})}return a};a.prototype.findVideos.call(this);var e=d();return Array.prototype.push.apply(c.videos,e),c.videos},getMetadata:function(a){var c=b.getParamsFromUrl(a);return{embedCode:c.embedCode||c.ec,playerId:c.playerId||c.pbid||c.me}}},ultimedia:{regex:/^(?:https?:\/\/)?(?:www\.)?(?:ultimedia\.com|digiteka\.net)\/deliver\/generic\/iframe\/(?:mdtk\/(?:[a-zA-Z0-9]+)\/)?(?:(?:[a-zA-Z0-9]+)\/(?:[a-zA-Z0-9]+)\/)?src\/([a-zA-Z0-9]+)?/,prefix:"ul",getMetadata:function(a){var b,c=/mdtk\/([a-zA-Z0-9]+)\//,d=c.exec(a);return d&&d.length>=1&&(b=d[1]),{playerId:b}}},jwplayer:{prefix:"jw",findVideos:function(){var a=[];if(!window.jwplayer)return a;for(var c=0;jwplayer(c)&&(jwplayer(c).getConfig||jwplayer(c).file||jwplayer(c).config);){var d=/ultimedia\.com/;if(jwplayer(c).config&&jwplayer(c).config.flashplayer&&d.exec(jwplayer(c).config.flashplayer))c++;else{var e={};jwplayer(c).file&&(e.file=jwplayer(c).file);var f;(jwplayer(c).getConfig||jwplayer(c).config)&&(f=jwplayer(c).getConfig?jwplayer(c).getConfig():jwplayer(c).config,f.file?e.file=f.file:f.playlistItem?e.file=f.playlistItem.file:f.sources?e.file=f.sources[0].file:f.playlist&&f.playlist.length&&f.playlist[0].sources.length&&(e.file=f.playlist[0].sources[0].file));var g=jwplayer(c).id,h=b.createHashFromString(e.file),i=document.getElementById(g),j={videoContainerType:i.tagName,jwplayerIndex:c,provider_id:h,source_id:"jw."+h,provider:"jwplayer",id:g,metadata:{file:e.file}};a.push(j),c++}}return self.videos=a,self.videos}},brightcove:{prefix:"bc",regex:/brightcove\.com\/services\/viewer\/.*\?.*videoPlayer=([a-zA-Z0-9-\-\:\%]+).*/,metadataFields:["flashID","playerID","playerKey","@videoPlayer"]}};a.prototype.getMetadata=function(a){var c=b.getParamsFromUrl(a),d={};if(this.metadataFields)for(var e=0;e<this.metadataFields.length;e++){var f=this.metadataFields[e];c[f]&&(d[f]=c[f])}return d},a.prototype.isSupported=function(a){var b=this,c=!1;if(!(b.regex instanceof RegExp))return!1;var d=a.src||a.data,e=b.regex.exec(decodeURIComponent(d));if(null!==e&&void 0!==e[1]){var f=e[1];if("videoseries"===f)return!1;var g=b.prefix+"."+f,h=document.querySelector('#pulpix[data-source-id="'+g+'"]');h||(c={videoContainerType:a.tagName,provider_id:f,source_id:g,provider:b.name,id:a.id,el:a,metadata:b.getMetadata(d)})}return c},a.prototype.findVideos=function(){var a=this,b=[];Array.prototype.push.apply(b,Array.prototype.slice.call(document.getElementsByTagName("iframe"))),Array.prototype.push.apply(b,Array.prototype.slice.call(document.getElementsByTagName("object")));for(var c=0;c<b.length;c++){var d=a.isSupported(b[c]);d&&a.videos.push(d)}return a.generateUniqueIds(),a.videos},a.prototype.generateUniqueIds=function(){for(var a=0;a<this.videos.length;a++)if(!this.videos[a].el.id){var b=Math.floor((new Date).getTime()/1e3),c=self.prefix+"-"+this.videos[a].providerId+"_"+a+"_"+b;this.videos[a].el.id=c,this.videos[a].id=c}};var d={};for(var e in c)d[e]=function(b,c,d){a.apply(this,arguments),this.videos=[]},d[e].prototype=Object.create(a.prototype),d[e].prototype.name=e,d[e].prototype.regex=c[e].regex,d[e].prototype.prefix=c[e].prefix,d[e].prototype.metadataFields=c[e].metadataFields,c[e].getMetadata&&(d[e].prototype.getMetadata=c[e].getMetadata),c[e].findVideos&&(d[e].prototype.findVideos=c[e].findVideos);var f=function(){this._sourceIds=[],this._videoContainers=[]};f.prototype.getVideoContainers=function(){this._sourceIds=[],this._videoContainers=[];var a=[];for(var b in d){var c=new d[b],e=c.findVideos();Array.prototype.push.apply(a,e)}for(var f=0;f<a.length;f++)this._sourceIds.push(a[f].source_id);return a},f.prototype._getHttpCall=function(a,b){var c=new XMLHttpRequest;c.open("GET",a,!0),c.send(),c.onreadystatechange=function(){if(4===c.readyState&&200===c.status&&"[]"!==c.responseText){var a=JSON.parse(c.responseText);b(a)}}},f.prototype._getTagsForVideo=function(a,b,c,d){var e=c+"/api/v1/tag?format=json&video="+a;this._getHttpCall(e,function(a){d(a,b)})},f.prototype._getIndex=function(a,b){for(var c=0;c<a.length;c++)if(a[c].video.id===b)return c;return!1},f.prototype.getPulpixData=function(a,b,c,d){for(var e=[],f={},g=0;g<a.length;g++){var h=a[g];f[h.source_id]=h.metadata,e.push(h.source_id)}var i=b+"/api/v1/snippet?format=json&user="+c+"&source_id__in="+window.escape(e.join(","))+"&referer="+window.escape(document.location)+"&context=snippet&metadata="+encodeURIComponent(JSON.stringify(f)),j=[],k=a.length;this._getHttpCall(i,function(b){for(var c=0;k>c;c++){var e=b.filter(function(b){return b.source_id===a[c].source_id});if(e.length>0){var f=a[c];f.video=e[0],j.push(f)}else delete a[c]}d(j)})};var g={};return g.init=function(){var a=this;if((!window.px.data||!window.px.data.userId)&&this.isCompatible()){var b=document.getElementById("pulpix").getAttribute("data-dynamic"),c=parseInt(document.getElementById("pulpix").getAttribute("data-user-id"));a.debug=document.getElementById("pulpix").getAttribute("data-debug"),window.px.debug={},a.dynamicCheck=b||-1!==[451,453,174,540,542,1,536].indexOf(c),a.LastSourceIds=[],a.onVideosFound(function(b){a.cleanVideoContainer(b),a.loadVideoContainerData(b,function(b){a.loadSnippetDeps(b)})})}},g.onVideosFound=function(a){var b=this;b.onDomReady(function(){b.checkIfVideosOnPage(a),b.hasAttemptedLoad=!0}),b.dynamicCheck&&(b.interval=setInterval(function(){b.checkIfVideosOnPage(a)},500))},g.onDomReady=function(a){"complete"===window.document.readyState||"loaded"===window.document.readyState||"interactive"===window.document.readyState?a():(document.addEventListener("DOMContentLoaded",function(){a()}),setTimeout(function(){self.hasAttemptedLoad||a()},3e3))},g.checkIfVideosOnPage=function(a){var c=this,d=new f,e=d.getVideoContainers(),g=d._sourceIds;e.length>0?(clearInterval(c.interval),b.arrayEquals(g,c.LastSourceIds)||(c.LastSourceIds=g,a(e),c.debug&&"function"==typeof window.pxFoundCallback&&window.pxFoundCallback(e),c.debug&&(px.debug.videoContainers=e))):c.LastSourceIds=[]},g.cleanVideoContainer=function(a){for(var c=0;c<a.length;c++)if("IFRAME"===a[c].videoContainerType){var d=document.getElementById(a[c].id),e=d.getAttribute("src"),f=e.split("?"),g=f[0],h={};2===f.length&&(h=b.deserialize(f[1]));var i={},j=!1;if("youtube"===a[c].provider&&!h.enablejsapi){j=!0,i=h;var k=document.location.protocol+"//"+document.location.host;i.origin=k,i.enablejsapi=1,i.controls=1,i.iv_load_policy=3,i.autohide=0,i.showinfo=0,i.autoplay=0,i.wmode="transparent",i.autoplay&&(a[c].autoplay=1)}"dailymotion"!==a[c].provider||h.api||(j=!0,i=h,i.api="postMessage",b.isMobile()&&i.autoplay&&delete i.autoplay),"vimeo"!==a[c].provider||h.api||(j=!0,i=h,i.api=1,i.origin=window.location.protocol+"//"+window.location.host),j&&(e=g+"?"+b.serialize(i),d.setAttribute("style",d.getAttribute("style")+";background-color: black"),d.setAttribute("src",e))}},g.loadVideoContainerData=function(a,c){this.hosts=this.getHosts();var d=document.getElementById("pulpix").getAttribute("data-user-id"),e=new f;e.getPulpixData(a,this.hosts.apiHost,d,function(a){if(b.isMobile())for(var d=0;d<a.length;d++)if(!a[d].video.preferences.playback.enable_on_mobile)return;c(a)})},g.loadSnippetDeps=function(a){var b=this,c=document.getElementById("pulpix"),d=c.getAttribute("data-user-id"),e=c.getAttribute("src");if("www.gala.fr"===window.location.hostname||"www.femmeactuelle.fr"===window.location.hostname)try{Object.defineProperty(Object.prototype,"toJson",{value:function(){},writable:!0,enumerable:!1,configurable:!0})}catch(f){}window.px.data={videos:a,userId:d,src:e,scriptHost:b.hosts.scriptHost,apiHost:b.hosts.apiHost},void 0!==window.pxRequire&&void 0!==window.pxRequire.require&&window.pxRequire.require.defined("snippet-app")&&(window.pxRequire.require.undef("px-globals"),window.pxRequire.require.undef("mini-player-loader"));var g=document.createElement("script"),h=document.getElementsByTagName("script")[0];g.src=b.hosts.scriptHost+"/static/pulpix.1.4.18/pulpix-deps.min.js",h.parentNode.insertBefore(g,h)},g.getHosts=function(){var a=document.getElementById("pulpix"),b=document.createElement("a");b.href=a.getAttribute("src");var c={"www.pulpix.co":"https://www.pulpix.co","cdn.pulpix.co":"https://www.pulpix.co","cdn.demo.pulpix.co":"http://www.demo.pulpix.co","www.demo.pulpix.co":"http://www.demo.pulpix.co","www.dev.pulpix.co":b.protocol+"//www.dev.pulpix.co","d1541ufeg62y29.cloudfront.net":"http://www.demo.pulpix.co"},d=c[b.hostname],e=/player\.((dev|demo) \.)?pulpix.co/;window.location.hostname.match(e)&&(d="//"+window.location.hostname);var f=d?d:"https://www.pulpix.co";f.match(/dev/)&&(f+=":5000"),f=f;var g=b.protocol+"//"+b.host.replace("8080","5000");return-1!==b.href.indexOf("/pulpixstaging/")?(f="https://pulpixstaging.herokuapp.com",g+="/pulpixstaging"):-1!==b.href.indexOf("/pulpix/")&&(g+="/pulpix"),{apiHost:f,scriptHost:g}},g.isCompatible=function(){var a=function(){var a=window.angular,b=a&&!!a.version.full.match(/^1\.[0-1](\.|$)/);return!a||a&&!b},c=function(){var a=navigator.userAgent;if(a.indexOf("Android")>=0){var b=parseFloat(a.slice(a.indexOf("Android")+8));if(b>=4)return!0}return!1},d=function(){var a=document.createElement("div");a.innerHTML="<!--[if lte IE 9]><i></i><![endif]-->";var b=1===a.getElementsByTagName("i").length;return b?!0:!1},e=function(a){if(/iP(hone|od|ad)/.test(a)){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]}},f=function(){var a=navigator.userAgent,b=/iPad/i.test(a),c=e(a);return b&&c[0]<8},g=function(){var a=navigator.userAgent;return/iPhone/i.test(a)},h=a()&&!d()&&(!b.isMobile()||c()||g())&&!f();return h},g}();px.init()}