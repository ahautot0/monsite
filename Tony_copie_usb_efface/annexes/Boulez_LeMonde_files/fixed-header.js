define(function(require){var $=require("jquery");var sharing=require("lmd/ui/sharing");var xiti=require("lmd/module/xiti/hit");var $toolbar=$(".fixed-header");var $contentContainer=$("h1");var initVisibilityToggle=function(){if($contentContainer.offset().top===$(window).scrollTop())$toolbar.addClass("fixed-header-show");else $(window).bind("scroll",function(){if($(window).scrollTop()>=$contentContainer.offset().top-55)$toolbar.addClass("fixed-header-show");else $toolbar.removeClass("fixed-header-show")})};
var initSharingCounters=function(){var counterElements=$toolbar.find(".fixed-header-facebook-likes-counter");var i=counterElements.length;if(i>0)sharing.getFacebookLikes().done($.proxy(function(facebookLikes){while(i){i--;if(facebookLikes>0)counterElements[i].innerHTML=" ("+sharing.formatCounter(facebookLikes)+")"}},this))};var initGotoTop=function(){$toolbar.find(".fixed-header-title").on("click",function(){xiti.hit(this,"C","","Header::Haut_de_Page","N");$("html, body").animate({scrollTop:0},1E3)})};
var initHome=function(){$toolbar.find(".fixed-header-logo").on("click",function(e){e.preventDefault();xiti.hit(this,"C","","Header::Accueil","N")})};return{init:function(){sharing.init($toolbar);initSharingCounters();initGotoTop();initHome();initVisibilityToggle()}}});
