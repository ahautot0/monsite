define(function(require){var path=require("lib/object-path");if(window.screen.width<699||path.get(lmd,"usMeter.activated"))return{data:null,increment:function(){},operationAlreadySeen:function(){},markOperationAsSeen:function(){}};var storageLabel="lmd_crm_data";var storage=require("lmd/core/storage");var fingerprint=require("lib/fingerprint");var data=storage.get(storageLabel);if(data===null){data={browserId:fingerprint.get(),pageViews:0,articleViews:0,operationIds:[]};storage.set(storageLabel,data)}var increment=
function(){if(data.pageViews)data.pageViews=data.pageViews+1;else data.pageViews=1;if(path.get(lmd,"context.element.type.nom")==="article")if(data.articleViews)data.articleViews=data.articleViews+1;else data.articleViews=1;storage.set(storageLabel,data)};var operationAlreadySeen=function(operationId){return data.operationIds.indexOf(operationId)>-1};var markOperationAsSeen=function(operationId){if(!data.operationIds)data.operationIds=[operationId];else if(data.operationIds.indexOf(operationId)===
-1)data.operationIds.push(operationId);storage.set(storageLabel,data)};return{data:data,increment:increment,operationAlreadySeen:operationAlreadySeen,markOperationAsSeen:markOperationAsSeen}});
